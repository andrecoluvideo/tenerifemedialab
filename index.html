<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Video Tenerife – Turismo, Barche, Real Estate | Andrea Colucci Films</title>
  <meta name="description" content="Video cinematografici a Tenerife per turismo, charter, hotel, real estate. Produzione, montaggio, story-driven content." />
  <style>
    :root{
      --bg:#0b0b0d;
      --card:#0f1720;
      --muted:#aab2bd;
      --accent: linear-gradient(135deg,#ff9a76 0%,#ffd27f 100%);
      --glass: rgba(255,255,255,0.04);
      --radius:14px;
      --container:1200px;
      --transition:all .28s cubic-bezier(.2,.9,.3,1);
      --white: #fff;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family:Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      background: linear-gradient(180deg,#020204 0%, #071025 100%);
      color:var(--white);
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      line-height:1.45;
      padding-bottom:80px;
    }
    header{display:flex;align-items:center;justify-content:space-between;padding:22px 20px;max-width:var(--container);margin:0 auto}
    .logo{display:flex;gap:12px;align-items:center}
    .logo img{width:42px;height:42px;border-radius:8px;object-fit:cover}
    nav{display:flex;gap:12px;align-items:center}
    a.btn{
      background:transparent;border:1px solid rgba(255,255,255,0.08);padding:8px 12px;border-radius:10px;color:var(--white);text-decoration:none;font-weight:600
    }
    .lang-switch{display:flex;gap:8px}
    .lang {cursor:pointer;padding:6px 8px;border-radius:8px;border:1px solid transparent; font-weight:600}
    .lang.active{background:rgba(255,255,255,0.06);border-color:rgba(255,255,255,0.08)}
    main{max-width:var(--container);margin:0 auto;padding:18px;}
    .hero{
      display:grid;grid-template-columns:1fr 420px;gap:24px;align-items:center;margin-top:24px;
    }
    .hero-left h1{font-size:clamp(28px,4.5vw,48px);margin:0 0 12px}
    .lead{color:var(--muted);margin-bottom:18px}
    .cta-row{display:flex;gap:12px;flex-wrap:wrap}
    .card{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); padding:18px;border-radius:16px;box-shadow:0 6px 28px rgba(2,6,23,0.6);border:1px solid rgba(255,255,255,0.03)}
    .hero-right img{width:100%;border-radius:12px;display:block;object-fit:cover;height:100%}
    section{margin-top:28px}
    .grid{display:grid;grid-template-columns:repeat(3,1fr);gap:16px}
    .service{padding:16px;border-radius:12px;background:var(--glass);border:1px solid rgba(255,255,255,0.03)}
    footer{max-width:var(--container);margin:48px auto 16px;padding:18px;color:var(--muted);display:flex;justify-content:space-between;align-items:center}
    /* Processo + FAQ con gradient sfumature colorate */
    .process, .faq{
      padding:28px;border-radius:18px;margin-top:18px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border:1px solid rgba(255,255,255,0.03)
    }
    .process { background: linear-gradient(135deg, rgba(255,150,110,0.06), rgba(255,210,120,0.03)); }
    .faq { background: linear-gradient(135deg, rgba(110,160,255,0.04), rgba(120,80,220,0.03)); }
    .process-steps{display:flex;flex-direction:column;gap:12px}
    .step{display:flex;gap:12px;align-items:flex-start}
    .step .num{width:44px;height:44px;border-radius:10px;background:rgba(0,0,0,0.25);display:flex;align-items:center;justify-content:center;font-weight:700}
    /* Packages list */
    .packages{display:grid;grid-template-columns:repeat(auto-fit,minmax(230px,1fr));gap:16px;margin-top:18px}
    .pkg{padding:18px;border-radius:12px;cursor:pointer;transition:var(--transition);border:1px solid rgba(255,255,255,0.03);background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.005))}
    .pkg:hover{transform:translateY(-6px);box-shadow:0 14px 40px rgba(2,6,23,0.6)}
    .pkg h3{margin:0 0 8px}
    /* Package page */
    .page{display:none}
    .page.active{display:block}
    .pkg-hero{display:flex;gap:18px;align-items:center;margin-bottom:18px}
    .pkg-hero .img{width:360px;height:220px;border-radius:12px;overflow:hidden;background:linear-gradient(135deg,#ffb069,#ffdd8c);flex-shrink:0}
    /* modal */
    .modal-backdrop{position:fixed;inset:0;background:rgba(1,2,5,0.6);display:none;align-items:center;justify-content:center;z-index:1200;padding:20px}
    .modal-backdrop.active{display:flex}
    .modal{background:linear-gradient(180deg,#071021,#0b1320);padding:20px;border-radius:12px;width:100%;max-width:640px;border:1px solid rgba(255,255,255,0.04)}
    .modal h4{margin-top:0}
    .form-row{display:flex;gap:8px;margin-top:8px}
    input,textarea,select{width:100%;padding:10px;border-radius:8px;border:1px solid rgba(255,255,255,0.06);background:transparent;color:var(--white)}
    button.primary{background:linear-gradient(90deg,#ff9a76,#ffd27f);border:none;padding:10px 16px;border-radius:10px;font-weight:700;cursor:pointer}
    .meta{font-size:13px;color:var(--muted);margin-top:8px}
    /* responsive */
    @media (max-width:920px){
      .hero{grid-template-columns:1fr;gap:18px}
      .hero-right{order:-1}
    }
    @media (max-width:600px){
      .grid{grid-template-columns:1fr}
      .logo img{width:36px;height:36px}
      nav{gap:8px}
    }
    /* little helpers */
    .muted{color:var(--muted)}
    .pill{padding:6px 10px;border-radius:999px;border:1px solid rgba(255,255,255,0.04);display:inline-block;font-size:13px}
    .small{font-size:13px}
    .text-right{text-align:right}
    .center{display:flex;align-items:center;justify-content:center}
    .sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}
  </style>
</head>
<body>
  <header>
    <div class="logo">
      <img src="https://images.unsplash.com/photo-1507525428034-b723cf961d3e?q=80&w=400&auto=format&fit=crop&crop=faces" alt="logo">
      <div>
        <div style="font-weight:800">Andrea Colucci Films</div>
        <div class="small muted">Video Production · Tenerife</div>
      </div>
    </div>

    <nav>
      <a class="btn" href="#home" data-link>Home</a>
      <a class="btn" href="#packages" data-link data-scroll>Pacchetti</a>
      <a class="btn" href="#services" data-link>Servizi</a>
      <a class="btn" href="#process" data-link>Processo</a>
      <div class="lang-switch" role="tablist" aria-label="Lingua">
        <div class="lang" data-lang="it">IT</div>
        <div class="lang" data-lang="en">EN</div>
        <div class="lang" data-lang="es">ES</div>
      </div>
    </nav>
  </header>

  <main>
    <!-- HERO -->
    <section id="home" class="hero">
      <div class="hero-left">
        <h1 data-i18n="hero.title">Video cinematografici per turismo, charter e real estate a Tenerife</h1>
        <p class="lead" data-i18n="hero.lead">Produciamo contenuti emozionali, spot, e video commerciali ottimizzati per web e social.</p>
        <div class="cta-row">
          <a class="btn" href="#packages" data-link data-scroll data-i18n="hero.cta1">Scopri i pacchetti</a>
          <button class="btn" id="quickContactBtn" data-i18n="hero.cta2">Contattami</button>
        </div>
        <div style="margin-top:12px" class="muted small" data-i18n="hero.note">Lingue disponibili: Italiano · English · Español</div>
      </div>
      <div class="card hero-right">
        <img src="https://images.unsplash.com/photo-1500530855697-b586d89ba3ee?q=80&w=1000&auto=format&fit=crop" alt="hero">
      </div>
    </section>

    <!-- SERVICES -->
    <section id="services">
      <h2 data-i18n="services.title">Servizi principali</h2>
      <div class="grid" aria-live="polite">
        <div class="service">
          <h3 data-i18n="services.s1.title">Turismo & Hotel</h3>
          <p class="muted" data-i18n="services.s1.desc">Contenuti emozionali, video per stagionalità, OTT, social ads e landing.</p>
          <div style="margin-top:8px">
            <span class="pill" data-i18n="services.s1.tag">Spot emozionali</span>
            <span class="pill" style="margin-left:8px" data-i18n="services.s1.tag2">Social</span>
          </div>
        </div>
        <div class="service">
          <h3 data-i18n="services.s2.title">Charter & Boat</h3>
          <p class="muted" data-i18n="services.s2.desc">Riprese drone, storytelling experience, video promozionali per charter.</p>
        </div>
        <div class="service">
          <h3 data-i18n="services.s3.title">Real Estate</h3>
          <p class="muted" data-i18n="services.s3.desc">Tour video per immobili di pregio, riprese stabilizzate, set fotografico.</p>
        </div>
      </div>
    </section>

    <!-- PROCESS -->
    <section id="process" class="process" aria-labelledby="processTitle">
      <h2 id="processTitle" data-i18n="process.title">Il nostro processo</h2>
      <div class="process-steps">
        <div class="step">
          <div class="num">1</div>
          <div>
            <strong data-i18n="process.s1.title">Brief & Planning</strong>
            <div class="muted small" data-i18n="process.s1.desc">Analisi, storyboard e timeline con milestone condivise.</div>
          </div>
        </div>
        <div class="step">
          <div class="num">2</div>
          <div>
            <strong data-i18n="process.s2.title">Riprese</strong>
            <div class="muted small" data-i18n="process.s2.desc">Drone, gimbal, luci e produzione on-site a Tenerife.</div>
          </div>
        </div>
        <div class="step">
          <div class="num">3</div>
          <div>
            <strong data-i18n="process.s3.title">Montaggio & Consegna</strong>
            <div class="muted small" data-i18n="process.s3.desc">Editing professionale, color grading, formati per web e broadcast.</div>
          </div>
        </div>
      </div>
    </section>

    <!-- PACKAGES -->
    <section id="packages">
      <h2 data-i18n="packages.title">Pacchetti</h2>
      <div class="packages" id="packagesList" role="list">
        <!-- GENERATE PACKAGES VIA JS -->
      </div>
      <div style="margin-top:14px" class="muted small" data-i18n="packages.note">Clicca su un pacchetto per la pagina dedicata. Alla fine della pagina troverai il pulsante Contattami con i miei dati.</div>
    </section>

    <!-- FAQ -->
    <section id="faq" class="faq" aria-labelledby="faqTitle">
      <h2 id="faqTitle" data-i18n="faq.title">Domande frequenti</h2>
      <div style="margin-top:12px">
        <details style="margin-bottom:8px">
          <summary><strong data-i18n="faq.q1">Quanto tempo per consegnare?</strong></summary>
          <div class="muted small" data-i18n="faq.a1">Dipende dalla complessità: tipicamente 7-21 giorni lavorativi.</div>
        </details>
        <details style="margin-bottom:8px">
          <summary><strong data-i18n="faq.q2">Lavorate a Tenerife?</strong></summary>
          <div class="muted small" data-i18n="faq.a2">Sì, siamo basati a Tenerife e operiamo sia localmente che remote.</div>
        </details>
      </div>
    </section>

    <!-- PACKAGE PAGE (dynamic) -->
    <section id="packagePage" class="page" aria-live="polite">
      <!-- dynamically populated -->
    </section>

    <!-- CONTACT -->
    <section id="contact" style="margin-top:28px">
      <div class="card">
        <h3 data-i18n="contact.title">Contatti</h3>
        <div style="display:flex;gap:12px;flex-wrap:wrap;align-items:center">
          <div>
            <div style="font-weight:700">Andrea Colucci</div>
            <div class="muted small">Videomaker · Tenerife</div>
            <div class="meta" style="margin-top:8px">Tel: <a href="tel:+393910911719" style="color:inherit;text-decoration:underline">+39 391 091 1719</a></div>
            <div class="meta">Instagram: <a href="https://instagram.com/andrecolu_video" target="_blank" style="color:inherit;text-decoration:underline">@andrecolu_video</a></div>
          </div>
          <div style="margin-left:auto" class="text-right">
            <button class="primary" id="contactOpen" data-i18n="contact.open">Contattami</button>
          </div>
        </div>
      </div>
    </section>
  </main>

  <footer>
    <div class="small muted">© <span id="year"></span> Andrea Colucci Films — Tenerife</div>
    <div class="small muted">Designed & Maintained</div>
  </footer>

  <!-- Modal Contatto -->
  <div class="modal-backdrop" id="modalBackdrop" aria-hidden="true">
    <div class="modal" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
      <h4 id="modalTitle" data-i18n="modal.title">Contattami</h4>
      <div class="muted small" data-i18n="modal.subtitle">Scrivimi i dettagli e ti rispondo al più presto.</div>
      <div style="margin-top:12px">
        <label class="sr-only" for="name">Nome</label>
        <input id="contactName" placeholder="Nome" />
        <div style="height:8px"></div>
        <label class="sr-only" for="email">Email</label>
        <input id="contactEmail" placeholder="Email" />
        <div style="height:8px"></div>
        <label class="sr-only" for="message">Messaggio</label>
        <textarea id="contactMessage" rows="4" placeholder="Dettagli del progetto (luogo, date, durata, servizi richiesti)"></textarea>
        <div style="display:flex;gap:8px;margin-top:12px;justify-content:flex-end">
          <button class="btn" id="modalClose" type="button">Chiudi</button>
          <button class="primary" id="modalSend" type="button">Invia</button>
        </div>
        <div id="modalStatus" class="meta" style="margin-top:10px"></div>
      </div>
    </div>
  </div>

  <script>
    /***********************
      CONFIGURAZIONE INIZIALE
      Cambia DEFAULT_LANG se vuoi impostare la lingua predefinita alla prima visita.
      Possibili valori: "it", "en", "es"
    ************************/
    const DEFAULT_LANG = localStorage.getItem('site_lang') || 'it';

    /* Contenuti multilingua (testi) */
    const I18N = {
      it: {
        "hero.title":"Video cinematografici per turismo, charter e real estate a Tenerife",
        "hero.lead":"Produciamo contenuti emozionali, spot, e video commerciali ottimizzati per web e social.",
        "hero.cta1":"Scopri i pacchetti",
        "hero.cta2":"Contattami",
        "hero.note":"Lingue disponibili: Italiano · English · Español",
        "services.title":"Servizi principali",
        "services.s1.title":"Turismo & Hotel",
        "services.s1.desc":"Contenuti emozionali, video per stagionalità, OTT, social ads e landing.",
        "services.s1.tag":"Spot emozionali",
        "services.s1.tag2":"Social",
        "services.s2.title":"Charter & Boat",
        "services.s2.desc":"Riprese drone, storytelling experience, video promozionali per charter.",
        "services.s3.title":"Real Estate",
        "services.s3.desc":"Tour video per immobili di pregio, riprese stabilizzate, set fotografico.",
        "process.title":"Il nostro processo",
        "process.s1.title":"Brief & Planning","process.s1.desc":"Analisi, storyboard e timeline con milestone condivise.",
        "process.s2.title":"Riprese","process.s2.desc":"Drone, gimbal, luci e produzione on-site a Tenerife.",
        "process.s3.title":"Montaggio & Consegna","process.s3.desc":"Editing professionale, color grading, formati per web e broadcast.",
        "packages.title":"Pacchetti",
        "packages.note":"Clicca su un pacchetto per la pagina dedicata. Alla fine della pagina troverai il pulsante Contattami con i miei dati.",
        "faq.title":"Domande frequenti",
        "faq.q1":"Quanto tempo per consegnare?","faq.a1":"Dipende dalla complessità: tipicamente 7-21 giorni lavorativi.",
        "faq.q2":"Lavorate a Tenerife?","faq.a2":"Sì, siamo basati a Tenerife e operiamo sia localmente che remote.",
        "contact.title":"Contatti",
        "contact.open":"Contattami",
        "modal.title":"Contattami",
        "modal.subtitle":"Scrivimi i dettagli e ti rispondo al più presto.",
        "pkg.book":"Prenota / Richiedi preventivo"
      },
      en: {
        "hero.title":"Cinematic videos for tourism, charters and real estate in Tenerife",
        "hero.lead":"We create emotional content, spots and commercial videos optimized for web and social.",
        "hero.cta1":"Explore packages",
        "hero.cta2":"Contact me",
        "hero.note":"Available languages: Italian · English · Spanish",
        "services.title":"Main services",
        "services.s1.title":"Tourism & Hotels",
        "services.s1.desc":"Emotional content, seasonal videos, OTT, social ads and landing.",
        "services.s1.tag":"Emotional spots",
        "services.s1.tag2":"Social",
        "services.s2.title":"Charter & Boat",
        "services.s2.desc":"Drone filming, experience storytelling, promotional videos for charters.",
        "services.s3.title":"Real Estate",
        "services.s3.desc":"Property tours, stabilized footage, photo set.",
        "process.title":"Our process",
        "process.s1.title":"Brief & Planning","process.s1.desc":"Analysis, storyboard and timeline with shared milestones.",
        "process.s2.title":"Filming","process.s2.desc":"Drone, gimbal, lights and on-site production in Tenerife.",
        "process.s3.title":"Editing & Delivery","process.s3.desc":"Professional editing, color grading, formats for web and broadcast.",
        "packages.title":"Packages",
        "packages.note":"Click a package for the dedicated page. At the end you will find the Contact button with my details.",
        "faq.title":"FAQ",
        "faq.q1":"How long for delivery?","faq.a1":"It depends on complexity: typically 7-21 working days.",
        "faq.q2":"Do you work in Tenerife?","faq.a2":"Yes, we are based in Tenerife and operate both locally and remotely.",
        "contact.title":"Contact",
        "contact.open":"Contact me",
        "modal.title":"Contact me",
        "modal.subtitle":"Write the project details and I'll reply as soon as possible.",
        "pkg.book":"Book / Request quote"
      },
      es: {
        "hero.title":"Videos cinematográficos para turismo, charter y real estate en Tenerife",
        "hero.lead":"Producimos contenido emocional, spots y videos comerciales optimizados para web y social.",
        "hero.cta1":"Descubre los paquetes",
        "hero.cta2":"Contáctame",
        "hero.note":"Idiomas disponibles: Italiano · Inglés · Español",
        "services.title":"Servicios principales",
        "services.s1.title":"Turismo & Hoteles",
        "services.s1.desc":"Contenido emocional, vídeos por temporada, OTT, anuncios sociales y landing.",
        "services.s1.tag":"Spots emocionales",
        "services.s1.tag2":"Social",
        "services.s2.title":"Charter & Barcos",
        "services.s2.desc":"Grabación con dron, storytelling de experiencia, vídeos promocionales para charter.",
        "services.s3.title":"Real Estate",
        "services.s3.desc":"Tours en vídeo para inmuebles de alto valor, tomas estabilizadas, set fotográfico.",
        "process.title":"Nuestro proceso",
        "process.s1.title":"Brief & Planificación","process.s1.desc":"Análisis, storyboard y cronograma con hitos compartidos.",
        "process.s2.title":"Grabación","process.s2.desc":"Dron, gimbal, luces y producción on-site en Tenerife.",
        "process.s3.title":"Montaje & Entrega","process.s3.desc":"Edición profesional, color grading, formatos para web y broadcast.",
        "packages.title":"Paquetes",
        "packages.note":"Haz clic en un paquete para la página dedicada. Al final encontrarás el botón Contacta conmigo con mis datos.",
        "faq.title":"Preguntas frecuentes",
        "faq.q1":"¿Cuánto tiempo para la entrega?","faq.a1":"Depende de la complejidad: típicamente 7-21 días laborables.",
        "faq.q2":"¿Trabajáis en Tenerife?","faq.a2":"Sí, estamos basados en Tenerife y operamos tanto localmente como de forma remota.",
        "contact.title":"Contactos",
        "contact.open":"Contáctame",
        "modal.title":"Contáctame",
        "modal.subtitle":"Escribe los detalles del proyecto y te respondo cuanto antes.",
        "pkg.book":"Reservar / Solicitar presupuesto"
      }
    };

    /* Pacchetti (demo) - puoi personalizzare titolo/descr/immagine per ogni pacchetto */
    const PACKAGES = [
      {
        id: 'basic',
        title: {it:'Pacchetto Basic', en:'Basic Package', es:'Paquete Básico'},
        short: {it:'Riprese base, editing essenziale', en:'Basic shooting & editing', es:'Grabación básica y edición'},
        heroImg: 'https://images.unsplash.com/photo-1507525428034-b723cf961d3e?q=80&w=1200&auto=format&fit=crop'
      },
      {
        id: 'standard',
        title: {it:'Pacchetto Standard', en:'Standard Package', es:'Paquete Estándar'},
        short: {it:'Riprese estese + color grading', en:'Extended shooting + color grading', es:'Grabación extendida + color grading'},
        heroImg: 'https://images.unsplash.com/photo-1500530855697-b586d89ba3ee?q=80&w=1200&auto=format&fit=crop'
      },
      {
        id: 'premium',
        title: {it:'Pacchetto Premium', en:'Premium Package', es:'Paquete Premium'},
        short: {it:'Full production: drone, gimbal, sound design', en:'Full production: drone, gimbal, sound design', es:'Producción completa: dron, gimbal, diseño de sonido'},
        heroImg: 'https://images.unsplash.com/photo-1493612276216-ee3925520721?q=80&w=1200&auto=format&fit=crop'
      }
    ];

    /****************************
      LOGICA UI / ROUTING / I18N
    ****************************/
    (function(){
      // Elements
      const langEls = document.querySelectorAll('.lang');
      const i18nEls = document.querySelectorAll('[data-i18n]');
      const yearEl = document.getElementById('year');
      const packagesList = document.getElementById('packagesList');
      const packagePage = document.getElementById('packagePage');
      const modalBackdrop = document.getElementById('modalBackdrop');
      const modalClose = document.getElementById('modalClose');
      const modalSend = document.getElementById('modalSend');
      const contactOpen = document.getElementById('contactOpen');
      const quickContactBtn = document.getElementById('quickContactBtn');

      // set year
      yearEl.textContent = new Date().getFullYear();

      // language init
      let currentLang = localStorage.getItem('site_lang') || DEFAULT_LANG;
      setActiveLang(currentLang);

      // Bind lang buttons
      langEls.forEach(el=>{
        el.addEventListener('click', ()=> {
          const lang = el.dataset.lang;
          setLanguage(lang);
        });
      });

      function setActiveLang(lang){
        langEls.forEach(el => el.classList.toggle('active', el.dataset.lang === lang));
      }

      function setLanguage(lang){
        currentLang = lang;
        localStorage.setItem('site_lang', lang);
        setActiveLang(lang);
        // translate all elements
        i18nEls.forEach(el=>{
          const key = el.dataset.i18n;
          if(!key) return;
          const txt = (I18N[lang] && I18N[lang][key]) ? I18N[lang][key] : '';
          el.textContent = txt;
        });
        // re-render package list (localized)
        renderPackages();
        // if currently on a package page, re-render it
        const hash = location.hash.replace('#','');
        if(hash.startsWith('pkg-')){
          renderPackagePage(hash.replace('pkg-',''));
        }
      }

      // render package cards
      function renderPackages(){
        packagesList.innerHTML = '';
        PACKAGES.forEach(p=>{
          const el = document.createElement('div');
          el.className = 'pkg card';
          el.setAttribute('role','listitem');
          el.innerHTML = `
            <h3>${escapeHtml(p.title[currentLang] || p.title.it)}</h3>
            <div class="muted small">${escapeHtml(p.short[currentLang] || p.short.it)}</div>
            <div style="display:flex;gap:8px;margin-top:12px;align-items:center">
              <button class="primary" data-pid="${p.id}">${I18N[currentLang].pkg ? I18N[currentLang].pkg : 'Book'}</button>
              <a class="btn" href="#pkg-${p.id}" data-link style="margin-left:auto">Pagina</a>
            </div>
          `;
          // booking button opens modal
          el.querySelector('.primary').addEventListener('click', ()=>{
            openModalWithSubject(p);
          });
          packagesList.appendChild(el);
        });
      }

      function escapeHtml(str){ if(!str) return ''; return String(str).replace(/[&<>"']/g, s=>({ '&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":"&#39;" })[s]); }

      // modal open
      function openModalWithSubject(pkg){
        document.getElementById('contactMessage').value = `${pkg.title[currentLang] || pkg.title.it} - Richiesta di preventivo\n\nLuogo: Tenerife\nDurata: \nNote: `;
        openModal();
      }
      function openModal(){
        modalBackdrop.classList.add('active');
        modalBackdrop.setAttribute('aria-hidden','false');
      }
      function closeModal(){
        modalBackdrop.classList.remove('active');
        modalBackdrop.setAttribute('aria-hidden','true');
        document.getElementById('modalStatus').textContent = '';
      }

      modalClose.addEventListener('click', closeModal);
      modalBackdrop.addEventListener('click', (e)=>{ if(e.target === modalBackdrop) closeModal(); });
      contactOpen.addEventListener('click', openModal);
      quickContactBtn.addEventListener('click', openModal);

      // fake send (replace with real API or mailto)
      modalSend.addEventListener('click', ()=>{
        const name = document.getElementById('contactName').value.trim();
        const email = document.getElementById('contactEmail').value.trim();
        const msg = document.getElementById('contactMessage').value.trim();
        const status = document.getElementById('modalStatus');
        if(!email || !msg){ status.textContent = 'Inserisci email e messaggio.'; return; }
        status.textContent = 'Invio in corso...';
        // Simula invio
        setTimeout(()=>{
          status.textContent = 'Messaggio inviato! Ti risponderò a breve.';
          // in produzione: inviare via fetch ad endpoint o aprire mailto:
          // window.location.href = `mailto:andrecolu_video@example.com?subject=${encodeURIComponent('Richiesta progetto')}&body=${encodeURIComponent(msg)}`;
        },900);
      });

      // ROUTING (hash)
      window.addEventListener('hashchange', handleRoute);
      function handleRoute(){
        const h = location.hash.replace('#','') || 'home';
        // hide package page unless hash starts with 'pkg-'
        if(h.startsWith('pkg-')){
          const pid = h.replace('pkg-','');
          renderPackagePage(pid);
        } else {
          // show home/sections: hide package page
          packagePage.classList.remove('active');
          // scroll to element if exists
          const el = document.querySelector(`[id="${h}"]`);
          if(el) el.scrollIntoView({behavior:'smooth',block:'start'});
        }
      }

      function renderPackagePage(pid){
        const pkg = PACKAGES.find(p=>p.id===pid);
        if(!pkg){
          packagePage.innerHTML = `<div class="card"><h3>Pacchetto non trovato</h3></div>`;
          packagePage.classList.add('active');
          return;
        }
        packagePage.innerHTML = `
          <div class="card pkg-hero">
            <div class="img" style="background-image:url('${pkg.heroImg}');background-size:cover;background-position:center"></div>
            <div style="flex:1">
              <h2>${escapeHtml(pkg.title[currentLang]||pkg.title.it)}</h2>
              <div class="muted small">${escapeHtml(pkg.short[currentLang]||pkg.short.it)}</div>
              <div style="margin-top:12px">${renderPackageDetailsPlaceholder(pkg)}</div>
              <div style="display:flex;gap:8px;margin-top:14px">
                <a class="btn" href="#packages" data-link>← ${currentLang==='it'?'Torna ai pacchetti':'Back to packages'}</a>
                <button class="primary" id="pkgContact">${I18N[currentLang].pkg || 'Book'}</button>
              </div>
            </div>
          </div>
          <div style="margin-top:12px" class="card">
            <h3>${currentLang==='it'?'Cosa include':'What it includes'}</h3>
            <ul class="muted">
              <li data-i18n="">Riprese (drone/gimbal) - 1 giorno</li>
              <li data-i18n="">Montaggio + color grading</li>
              <li data-i18n="">Consegna file HD + ottimizzazione social</li>
            </ul>
            <div style="margin-top:12px" class="meta">Alla fine di questa pagina: <strong>Contattami</strong> con i miei dati.</div>
          </div>
        `;
        packagePage.classList.add('active');
        // bind contact on package
        document.getElementById('pkgContact').addEventListener('click', ()=>{
          openModalWithSubject(pkg);
        });
        // scroll into view
        packagePage.scrollIntoView({behavior:'smooth'});
      }

      function renderPackageDetailsPlaceholder(pkg){
        // Placeholder rich description (personalizzabile)
        return `<p class="muted small">${escapeHtml((pkg.short[currentLang]||pkg.short.it) + '.')} ${escapeHtml('Produzione completa con script, riprese e post-produzione. Possibilità di aggiungere voice-over e musica su misura.')}</p>`;
      }

      // initial render
      setLanguage(currentLang);
      renderPackages();
      handleRoute();

      // simple smooth scroll for internal links
      document.querySelectorAll('a[data-link]').forEach(a=>{
        a.addEventListener('click', (e)=>{
          const href = a.getAttribute('href') || '';
          if(href.startsWith('#')){
            e.preventDefault();
            location.hash = href;
          }
        });
      });

      // small accessibility: press ESC to close modal
      window.addEventListener('keydown', (e)=>{ if(e.key==='Escape') closeModal(); });

    })();
  </script>
</body>
</html>
